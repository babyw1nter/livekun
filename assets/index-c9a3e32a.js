import{s as k,o as G,x as re,k as F,K as L,I as D,_ as f,H as X,i as ae,p as se,d as H,M as I,c as N,f as E,z as O,ao as q,a as h,b as C,P as ie,ad as le,j as ce,r as ue,ae as de,e as pe,O as ge,ah as W,bm as j,F as ve,q as fe}from"./index-76b20fec.js";import{u as me,r as he}from"./plugin-vueexport-helper-880d0091.js";import{R as Se,e as ye,q as xe,u as $e,t as be,o as Ce,j as ze,d as Pe,c as ke}from"./index-8d8d112e.js";function we(){const e=k({});let t=null;const n=me();return G(()=>{t=n.value.subscribe(o=>{e.value=o})}),re(()=>{n.value.unsubscribe(t)}),e}function Ae(e){const t=k();return F(()=>{t.value=e()},{flush:"sync"}),t}const Be=e=>{const{antCls:t,componentCls:n,iconCls:o,avatarBg:r,avatarColor:p,containerSize:s,containerSizeLG:u,containerSizeSM:g,textFontSize:d,textFontSizeLG:c,textFontSizeSM:x,borderRadius:i,borderRadiusLG:a,borderRadiusSM:S,lineWidth:v,lineType:$}=e,m=(b,l,y)=>({width:b,height:b,lineHeight:`${b-v*2}px`,borderRadius:"50%",[`&${n}-square`]:{borderRadius:y},[`${n}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${n}-icon`]:{fontSize:l,[`> ${o}`]:{margin:0}}});return{[n]:f(f(f(f({},X(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:p,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:r,border:`${v}px ${$} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),m(s,d,i)),{"&-lg":f({},m(u,c,a)),"&-sm":f({},m(g,x,S)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Te=e=>{const{componentCls:t,groupBorderColor:n,groupOverlapping:o,groupSpace:r}=e;return{[`${t}-group`]:{display:"inline-flex",[`${t}`]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:o}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:r}}}},K=L("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:n}=e,o=D(e,{avatarBg:n,avatarColor:t});return[Be(o),Te(o)]},e=>{const{controlHeight:t,controlHeightLG:n,controlHeightSM:o,fontSize:r,fontSizeLG:p,fontSizeXL:s,fontSizeHeading3:u,marginXS:g,marginXXS:d,colorBorderBg:c}=e;return{containerSize:t,containerSizeLG:n,containerSizeSM:o,textFontSize:Math.round((p+s)/2),textFontSizeLG:u,textFontSizeSM:r,groupSpace:d,groupOverlapping:-g,groupBorderColor:c}}),U=Symbol("AvatarContextKey"),Re=()=>ae(U,{}),Oe=e=>se(U,e),Me=()=>({prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:()=>"default"},src:String,srcset:String,icon:ie.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}),He=H({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:Me(),slots:Object,setup(e,t){let{slots:n,attrs:o}=t;const r=k(!0),p=k(!1),s=k(1),u=k(null),g=k(null),{prefixCls:d}=I("avatar",e),[c,x]=K(d),i=Re(),a=N(()=>e.size==="default"?i.size:e.size),S=we(),v=Ae(()=>{if(typeof e.size!="object")return;const l=he.find(P=>S.value[P]);return e.size[l]}),$=l=>v.value?{width:`${v.value}px`,height:`${v.value}px`,lineHeight:`${v.value}px`,fontSize:`${l?v.value/2:18}px`}:{},m=()=>{if(!u.value||!g.value)return;const l=u.value.offsetWidth,y=g.value.offsetWidth;if(l!==0&&y!==0){const{gap:P=4}=e;P*2<y&&(s.value=y-P*2<l?(y-P*2)/l:1)}},b=()=>{const{loadError:l}=e;(l==null?void 0:l())!==!1&&(r.value=!1)};return E(()=>e.src,()=>{O(()=>{r.value=!0,s.value=1})}),E(()=>e.gap,()=>{O(()=>{m()})}),G(()=>{O(()=>{m(),p.value=!0})}),()=>{var l,y;const{shape:P,src:T,alt:V,srcset:Z,draggable:J,crossOrigin:Q}=e,Y=(l=i.shape)!==null&&l!==void 0?l:P,w=q(n,e,"icon"),z=d.value,ee={[`${o.class}`]:!!o.class,[z]:!0,[`${z}-lg`]:a.value==="large",[`${z}-sm`]:a.value==="small",[`${z}-${Y}`]:!0,[`${z}-image`]:T&&r.value,[`${z}-icon`]:w,[x.value]:!0},te=typeof a.value=="number"?{width:`${a.value}px`,height:`${a.value}px`,lineHeight:`${a.value}px`,fontSize:w?`${a.value/2}px`:"18px"}:{},_=(y=n.default)===null||y===void 0?void 0:y.call(n);let A;if(T&&r.value)A=h("img",{draggable:J,src:T,srcset:Z,onError:b,alt:V,crossorigin:Q},null);else if(w)A=w;else if(p.value||s.value!==1){const R=`scale(${s.value}) translateX(-50%)`,oe={msTransform:R,WebkitTransform:R,transform:R},ne=typeof a.value=="number"?{lineHeight:`${a.value}px`}:{};A=h(Se,{onResize:m},{default:()=>[h("span",{class:`${z}-string`,ref:u,style:f(f({},ne),oe)},[_])]})}else A=h("span",{class:`${z}-string`,ref:u,style:{opacity:0}},[_]);return c(h("span",C(C({},o),{},{ref:g,class:ee,style:[te,$(!!w),o.style]}),[A]))}}}),B=He,Ie=e=>{const{componentCls:t,popoverBg:n,popoverColor:o,width:r,fontWeightStrong:p,popoverPadding:s,boxShadowSecondary:u,colorTextHeading:g,borderRadiusLG:d,zIndexPopup:c,marginXS:x,colorBgElevated:i}=e;return[{[t]:f(f({},X(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:c,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--antd-arrow-background-color":i,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:n,backgroundClip:"padding-box",borderRadius:d,boxShadow:u,padding:s},[`${t}-title`]:{minWidth:r,marginBottom:x,color:g,fontWeight:p},[`${t}-inner-content`]:{color:o}})},xe(e,{colorBg:"var(--antd-arrow-background-color)"}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",[`${t}-content`]:{display:"inline-block"}}}]},Ne=e=>{const{componentCls:t}=e;return{[t]:$e.map(n=>{const o=e[`${n}-6`];return{[`&${t}-${n}`]:{"--antd-arrow-background-color":o,[`${t}-inner`]:{backgroundColor:o},[`${t}-arrow`]:{background:"transparent"}}}})}},_e=e=>{const{componentCls:t,lineWidth:n,lineType:o,colorSplit:r,paddingSM:p,controlHeight:s,fontSize:u,lineHeight:g,padding:d}=e,c=s-Math.round(u*g),x=c/2,i=c/2-n,a=d;return{[t]:{[`${t}-inner`]:{padding:0},[`${t}-title`]:{margin:0,padding:`${x}px ${a}px ${i}px`,borderBottom:`${n}px ${o} ${r}`},[`${t}-inner-content`]:{padding:`${p}px ${a}px`}}}},Ee=L("Popover",e=>{const{colorBgElevated:t,colorText:n,wireframe:o}=e,r=D(e,{popoverBg:t,popoverColor:n,popoverPadding:12});return[Ie(r),Ne(r),o&&_e(r),ye(r,"zoom-big")]},e=>{let{zIndexPopupBase:t}=e;return{zIndexPopup:t+30,width:177}}),We=()=>f(f({},Pe()),{content:W(),title:W()}),je=H({compatConfig:{MODE:3},name:"APopover",inheritAttrs:!1,props:ce(We(),f(f({},be()),{trigger:"hover",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1})),setup(e,t){let{expose:n,slots:o,attrs:r}=t;const p=ue();de(e.visible===void 0),n({getPopupDomNode:()=>{var i,a;return(a=(i=p.value)===null||i===void 0?void 0:i.getPopupDomNode)===null||a===void 0?void 0:a.call(i)}});const{prefixCls:s,configProvider:u}=I("popover",e),[g,d]=Ee(s),c=N(()=>u.getPrefixCls()),x=()=>{var i,a;const{title:S=j((i=o.title)===null||i===void 0?void 0:i.call(o)),content:v=j((a=o.content)===null||a===void 0?void 0:a.call(o))}=e,$=!!(Array.isArray(S)?S.length:S),m=!!(Array.isArray(v)?v.length:S);return!$&&!m?null:h(ve,null,[$&&h("div",{class:`${s.value}-title`},[S]),h("div",{class:`${s.value}-inner-content`},[v])])};return()=>{const i=pe(e.overlayClassName,d.value);return g(h(ze,C(C(C({},Ce(e,["title","content"])),r),{},{prefixCls:s.value,ref:p,overlayClassName:i,transitionName:ge(c.value,"zoom-big",e.transitionName),"data-popover-inject":!0}),{title:x,default:o.default}))}}}),Ge=le(je),Fe=()=>({prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"},shape:{type:String,default:"circle"}}),Le=H({compatConfig:{MODE:3},name:"AAvatarGroup",inheritAttrs:!1,props:Fe(),setup(e,t){let{slots:n,attrs:o}=t;const{prefixCls:r,direction:p}=I("avatar",e),s=N(()=>`${r.value}-group`),[u,g]=K(r);return F(()=>{const d={size:e.size,shape:e.shape};Oe(d)}),()=>{const{maxPopoverPlacement:d="top",maxCount:c,maxStyle:x,maxPopoverTrigger:i="hover",shape:a}=e,S={[s.value]:!0,[`${s.value}-rtl`]:p.value==="rtl",[`${o.class}`]:!!o.class,[g.value]:!0},v=q(n,e),$=fe(v).map((b,l)=>ke(b,{key:`avatar-key-${l}`})),m=$.length;if(c&&c<m){const b=$.slice(0,c),l=$.slice(c,m);return b.push(h(Ge,{key:"avatar-popover-key",content:l,trigger:i,placement:d,overlayClassName:`${s.value}-popover`},{default:()=>[h(B,{style:x,shape:a},{default:()=>[`+${m-c}`]})]})),u(h("div",C(C({},o),{},{class:S,style:o.style}),[b]))}return u(h("div",C(C({},o),{},{class:S,style:o.style}),[$]))}}}),M=Le;B.Group=M;B.install=function(e){return e.component(B.name,B),e.component(M.name,M),e};export{B as A,Ge as P};
