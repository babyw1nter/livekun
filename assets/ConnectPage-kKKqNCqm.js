import{X as C,F as m,Y as n,d as R,D as P,r as d,o as b,L as $,c as a,w as c,J as e,O as j,i as f,H as x,B}from"./index-igQZxn8-.js";import{_ as J}from"./index-I8nXKSWq.js";import{I as k}from"./index-UgUYrhLY.js";import{_ as D}from"./index-sAe033Iy.js";import{C as N}from"./index-iM-wwwC2.js";import"./TextArea-I0aCd7XK.js";import"./index-17e0lUKI.js";import"./SearchOutlined-AQAiuMYi.js";import"./useFlexGapSupport-GI9GMh44.js";import"./index-V7kMUAa0.js";import"./collapseMotion-ADCdKapG.js";import"./Dropdown-tnsvrMnw.js";import"./hasIn-Q_OWMeIO.js";import"./useMergedState-B4iWmp8o.js";const V=C("connentStore",{state(){return{isJoinedRoom:!1,roomInfo:{liveId:"",title:""}}},actions:{async getStatus(){const t=await m.get("/api/getStatus");return t.data.code===200?(this.$state=t.data.data,Promise.resolve(!0)):(this.$reset(),Promise.resolve(!1))},async joinRoom(t){const o=await m.post("/api/join",{liveId:t.toString()});return o.data.code===200?(this.$state=o.data.data,n.success("进入直播间成功！"),await this.getStatus(),Promise.resolve(!0)):(o.data.code===10001?n.warning("进入直播间失败，请稍后再试！"):n.error("服务器错误！"),await this.getStatus(),Promise.resolve(!1))},async reset(){const t=await m.post("/api/reset");return t.data.code===200?(this.$reset(),await this.getStatus(),n.success("重置成功！"),Promise.resolve(!0)):(n.warning(t.data.message),await this.getStatus(),Promise.resolve(!1))}}}),L={class:"connect-page-wrapper"},z={class:"join-input-wrap",style:{"margin-top":"1rem"}},Z=R({__name:"ConnectPage",async setup(t){let o,u;const s=V();[o,u]=P(()=>s.getStatus()),await o,u();const i=d(""),l=d(!1),r=d(!1),g=async()=>{i.value?(l.value=!0,await s.joinRoom(i.value),l.value=!1):n.warning("请输入直播间ID或房间ID！")},v=async()=>{r.value=!0,await s.reset(),r.value=!1};return(A,p)=>{const w=J,h=k,_=B,y=D,I=N;return b(),$("div",L,[a(I,null,{default:c(()=>[a(w,{message:e(s).isJoinedRoom?`已连接 ${e(s).roomInfo.liveId}`:"未连接",description:e(s).isJoinedRoom?`已进入直播间「${e(s).roomInfo.title}」`:"请进入一个直播间以使用所有功能。",type:e(s).isJoinedRoom?"success":"info",style:{"margin-bottom":"1rem"},"show-icon":""},null,8,["message","description","type"]),x("div",z,[a(y,{size:10},{default:c(()=>[a(h,{value:e(i),"onUpdate:value":p[0]||(p[0]=S=>j(i)?i.value=S:null),placeholder:"请输入直播间ID",disabled:e(l)||e(r),allowClear:""},null,8,["value","disabled"]),a(_,{onClick:g,type:"primary",loading:e(l),disabled:e(r)},{default:c(()=>[f(" 进入 ")]),_:1},8,["loading","disabled"]),a(_,{onClick:v,danger:"",loading:e(r)},{default:c(()=>[f(" 重置 ")]),_:1},8,["loading"])]),_:1})])]),_:1})])}}});export{Z as default};
